# Profile format v3

mcsvutilsで使用されるプロファイルデータのフォーマット

version: 3

## ファイル形式

プロファイルの形式としてJSONを用います。
ルートをオブジェクトとし、その内部に必要な要素を記述することでプロファイルを形成します。

## プロファイルのオブジェクト構造

- `@context`: object required  
	このJSONのオブジェクト型情報。  
	プロファイル読み出しのときは最初に読み込み、内容が既定値と一致していることを確認します。  
	要素が存在しない、型が異なる、もしくは内容が一致しない場合はエラーとなります。  
	- `name`: string required = `"mcsvutils.profile"`  
	- `version`: number required = `3`  
- `servicename`: string required  
	プロファイルの名前。  
	minecraftサーバーを操作するときにそのインスタンスを一意に識別するために使用されます。  
	要素が存在しない、型が異なる、もしくは空文字列の場合はエラーとなります。  
- `imagetag`: string required  
	実行されるサーバーイメージのタグ名。  
	要素が存在しない、型が異なる、もしくは空文字列の場合はエラーとなります。  
- `jvm`: array | null  
	java実行時のオプション引数。  
	v2では`option`という名前でした。  
	この要素が存在するとき、型が異なる場合はエラーとなります。  
	- (elements): string  
- `arguments`: array | null  
	実行されるjarに渡される引数。  
	この要素が存在するとき、型が異なる場合はエラーとなります。  
	- (elements): string  
- `cwd`: string | null  
	実行時の作業ディレクトリ。  
	要素が存在しない場合、コマンド実行時のディレクトリを作業ディレクトリにします。  
	この要素が存在するとき、型が異なる、もしくは空文字列の場合はエラーとなります。  
- `jre`: string | null  
	実行するjavaの実行パス。
	存在しない場合、デフォルトで`java`が呼び出されます。  
	この要素が存在するとき、型が異なる、もしくは空文字列の場合はエラーとなります。

## プロファイルとして有効なデータの例

```json
{"@context":{"name":"mcsvutils.profile","version":3},"servicename":"mcserver","imagetag":"1.21.1","jvm":[],"arguments":["--nogui"],"cwd":null,"jre":null}
```

## v2からのアップデートの際の注意点

以下の変更を含むため、後方互換性は完全に失われます。  
アップデートの際、古いプロファイルデータをバックアップしておくことを推奨します。
- プロファイルデータのバージョン情報の構造が変化します。
- jarファイルの直接指定による実行がサポートされなくなるため、`executejar`が削除されます。
- 他ユーザーとしての実行をサポートしなくなるため、`owner`が削除されます。
